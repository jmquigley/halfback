<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes Scaffold Classes Classes Scaffold × Search results Close Documentation generated by JSDoc 3.4.3 on May 12th 2017, 6:33:53 pm using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes Scaffold util.scaffold A library to simplify SSH interactions with a remote server. It can be used to run commands, change config, create files, etc. This module contains functions for simplifying SSH interactions with the remote production server. It can be used to run commands, change config, create files, etc. Each of the calls to run, sudo, etc, are sent to a command list queue. Once the commands are queued up, then the go function is called to process the commands in order. This class is used to group together dependent functions. Each grouping of commands should be a separate instantiation of the Scaffold class. e.g. let scaffold = new Scaffold(config.ssh); scaffold .run('uname -a') .sudo('env | sort') .go();Note that coverage is difficult with this module. It requires a host that can be used connected to via SSH and that the user has full control over that host. InstallationTo install as an application dependency: $ npm install --save util.scaffoldTo build the app and run all tests: $ npm run allUsagesTo connect to a remote server and execute a set of commands: const Scaffold = require('util.scaffold').Scaffold; let config = { &quot;hostname&quot;: &quot;example.com&quot;, &quot;host&quot;: &quot;192.168.1.42&quot;, &quot;port&quot;: 22, &quot;username&quot;: &quot;centos&quot;, &quot;privateKeyFile&quot;: &quot;~/.ssh/id_rsa&quot;, &quot;publicKeyFile&quot;: &quot;~/.ssh/id_rsa.pub&quot; }; new Scaffold(config) .run('uname -a') .sudo('env | sort') .mkdir('/var/log/myapp', {mode: '700', owner: 'root', group: 'docker'}) .put('/tmp/file1.txt', '/tmp/file2.txt') .go((err) =&gt; { if (err) { console.error(err); return; } console.log('Done.'); })An instance of the Scaffold class is created. Methods can be chained to this instance to queue commands. The first command above runs the uname command on the remote server. It runs it as the centos user. The second command dumps a sorted list of environment variables using sudo. This assumes that the SSH user centos has sudo permissions (or this command will fail). The third chained command creates a directory named /var/log/myapp and sets the permissions/ownership of the directory. The fourth command takes a file on the local machine and moves it to the remote machine. It works with text files only. All four of these commands are added to a queue. Execution starts when the go command is called. It processes each command in order. When it finishes a callback is executed. The callback uses the &quot;error first callback&quot; convention in node. APIThe module is composed of one class named Scaffold. It has the following public functions: copy - copies a file on the remote machine from one location to another on the remote machine. go - starts the processing of the command queue. mkdir - creates a directory on the remote host. put - takes a file from the local host and puts it on the remote host. run - runs a command on the remote host. sudo - runs a command on the remote host using sudo. × Search results Close Documentation generated by JSDoc 3.4.3 on May 12th 2017, 6:33:53 pm using the DocStrap template. "},"Scaffold.html":{"id":"Scaffold.html","title":"Class: Scaffold","body":" Documentation Classes Scaffold Class: Scaffold Scaffold an instance of the Scaffold class new Scaffold( [opts]) The constructor function for the scaffolding. This takes a single parameter that represents the configuration required to connect to a remote host using SSH. If the config is empty, then the commands are all executed on the local host instead. Parameters: Name Type Argument Description opts IScaffoldOpts &lt;optional&gt; holds SSH connection information from config.json Methods copy(src, dst [, opts]) Copies a file from one location to the other (on the same server). Use put to move a file from locatl to remote. This just moves things around on the same server. Parameters: Name Type Argument Default Description src string the source file to move dst string the destination location opts object &lt;optional&gt; null the optional arguments object recursive: {boolean} if true, use the -r flag on the copy sudo: {boolean} if true use sudo, otherwise regular copy Returns: a reference to this object for chaining. Type Scaffold go( [opts] [, cb]) Starts the processing of the command queue. Parameters: Name Type Argument Description opts ICommandOpts &lt;optional&gt; a set of commands used to process this queue. - verbose: {boolean} if true, then print more output, otherwise silent - shell: {string} the shell that the command should be run against. This is only relevant for the local processor. The remote processor runs with the shell of the authenticated in user. cb function &lt;optional&gt; a callback function that is executed when this process completes. It will be executed on success or failure. mkdir(directory, opts) Creates a directory on the remote server. Parameters: Name Type Default Description directory string the directory to factory on the remote server opts object null the list of optional arguments these include: mode: the file mode octet for the file being placed owner: the owner that should be set for this file group: linux group permission to set on file. Returns: a reference to this object for chaining. Type Scaffold put(lfile, rfile, opts) Takes a text file and puts it on the target remote machine. Parameters: Name Type Default Description lfile string the local file name to send to the remote rfile string the name of the remote file to send opts object null the list of optional arguments these include: mode: the file mode octet for the file being placed owner: the owner that should be set for this file group: linux group permission to set on file. Returns: a reference to this object for chaining. Type Scaffold run(cmd, opts) Runs a command on a remote or local server. Parameters: Name Type Default Description cmd string the command to run opts object null an object that holds the parameters used to run this command. cwd: current working directory sudo: a boolean that determines if sudo should be used delay: how many seconds to delay after the call. sudo(cmd, opts) A sugar wrapper for calling run with sudo wrapped around it. See &quot;run&quot; for the list of parameters in the args object. Parameters: Name Type Default Description cmd string the sudo command to execute opts object null an object that holds the parameters to the sudo call. × Search results Close Documentation generated by JSDoc 3.4.3 on May 12th 2017, 6:33:53 pm using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
